var Chatter=function(){this.VERSION="1.0.0",this.user_count=0,this.colors=["YellowGreen","DarkGoldenRod","Chocolate","LimeGreen","CornflowerBlue","Violet","LightSkyBlue","SaddleBrown","DarkOrange","SeaGreen","MediumVioletRed","DarkTurquoise","Olive","Tomato","DarkOliveGreen","Turquoise","DarkRed","Purple","Maroon","RebeccaPurple","DarkCyan","MediumBlue","HotPink","DeepPink","CadetBlue","PaleVioletRed","DarkOrchid","MediumPurple","Brown","DeepSkyBlue","DodgerBlue","SlateBlue","OliveDrab","OrangeRed","Coral","Crimson","Red","LightCoral","FireBrick","LightSeaGreen","MediumSlateBlue","DarkMagenta","Teal","Orchid","MidnightBlue","Orange","MediumAquaMarine","Green","DarkSalmon","DarkBlue","Navy","SteelBlue","Fuchsia","SkyBlue","ForestGreen","MediumSeaGreen","DarkViolet","RosyBrown","DarkSlateBlue","DarkSeaGreen","RoyalBlue","DarkGreen","MediumOrchid","BlueViolet"],this.color_map={},this.iframe,this.userlist,this.msglist,this.msgbox,this.btnsend,this.chkEnterToSend;var e=this;this.start=function(){if(e.iframe=$("iframe").contents(),e.userlist=e.iframe.find("#userlst_id"),e.msglist=e.iframe.find("#msglst_id"),e.msgbox=e.iframe.find("#d2l_form textarea"),e.btnsend=e.iframe.find("#d2l_form a[id*=z_]"),0!=e.userlist.length||0!=e.msglist.length||(e.userlist=$("#userlst_id"),e.msglist=$("#msglst_id"),e.msgbox=$("#d2l_form textarea"),e.btnsend=$("#d2l_form a[id*=z_]"),0!=e.userlist.length||0!=e.msglist.length)){e.btnsend.wrap("<div style='display:inline-block;'></div>"),e.chkEnterToSend=$("<input type='checkbox' name='enter_to_send' id='enter_to_send' />").insertAfter(e.btnsend),$("<label for='enter_to_send'>Enter to Send</label>").insertAfter(e.chkEnterToSend),$("</br>").insertAfter(e.btnsend),e.msgbox.on("keyup",function(t){13==t.which&&1==e.chkEnterToSend.prop("checked")&&e.btnsend[0].click()}),e.userlist.find("li").each(function(t,r){var n=$(r).text(),i=e.colors[e.user_count];e.color_map[n]=i,e.user_count++}),e.userlist.find("li span").each(function(t,r){var n=$(r).text();$(r).prop("style","color:"+e.color_map[n])}),e.msglist.find("div").each(function(e,t){$(t).prop("style","white-space:normal;background-color:#EFEFEF;margin:5px 0;padding:5px;border-radius:10px;")}),e.msglist.find("h3 span").each(function(t,r){var n=$(r).text().replace(":","");$(r).prop("style","font-weight:bold;color:"+e.color_map[n])});var t,r;setInterval(function(){var n=e.userlist,i=e.msglist.children().length;t!==n.html()&&(t=n.html(),e.userlist.trigger("contentChanged")),r!==i&&(r=i,e.msglist.trigger("contentChanged"))},10),e.userlist.on("contentChanged",e.pollUsers),e.msglist.on("contentChanged",e.pollMessages),console.log("Plato Enhancement Suite: Chatter v"+e.VERSION+" has started!")}},this.pollUsers=function(){e.userlist.find("li").each(function(t,r){var n=$(r).text();if(!(n in e.color_map)){var i=e.colors[e.user_count];e.color_map[n]=i}$(r).find("span").prop("style","color:"+e.color_map[n])})},this.pollMessages=function(){e.msglist.find("div").each(function(e,t){$(t).prop("style","white-space:normal;background-color:#ECECEC;margin:5px 0;padding:5px;border-radius:10px;")}),e.msglist.find("h3 span").each(function(t,r){var n=$(r).text().replace(":","");$(r).prop("style","font-weight:bold;color:"+e.color_map[n])})}},chatter=new Chatter;setTimeout(function(){chatter.start()},5e3);